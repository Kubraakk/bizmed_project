{% extends 'web/base.html' %}
{% load static %}

{% block title %}TanÄ±mlar{% endblock %}

{% block content %}
<div class="page-wrapper">
  <h1 class="page-title">âš™ï¸ TanÄ±mlar</h1>
  <p class="page-desc">BÃ¶lÃ¼mleri ve doktorlarÄ± yÃ¶netin</p>

  <div class="grid">
    <!-- âœ… BÃ¶lÃ¼mler -->
    <div class="card">
      <h2>ğŸ¥ BÃ¶lÃ¼mler</h2>
      <form method="post">
        {% csrf_token %}
        <div class="field">
          <input type="text" name="department_name" placeholder="Yeni bÃ¶lÃ¼m adÄ± girin..." required>
        </div>
        <button type="submit" name="add_department" class="btn btn-wide">Ekle</button>
      </form>

      <ul>
        {% for dept in departments %}
          <li class="list-item">
            <span>ğŸ¥ {{ dept.name }}</span>
            <form method="post">
              {% csrf_token %}
              <input type="hidden" name="delete_department_id" value="{{ dept.id }}">
              <button type="submit" class="delete-btn">Sil</button>
            </form>
          </li>
        {% empty %}
          <p class="empty-text">HenÃ¼z bÃ¶lÃ¼m eklenmemiÅŸ.</p>
        {% endfor %}
      </ul>
    </div>

    <!-- âœ… Doktorlar -->
    <div class="card">
      <h2>ğŸ‘¨â€âš•ï¸ Doktorlar</h2>
      <form method="post">
        {% csrf_token %}
        <div class="field">
          <input type="text" name="first_name" placeholder="Doktor adÄ±" required>
        </div>
        <div class="field">
          <input type="text" name="last_name" placeholder="Doktor soyadÄ±" required>
        </div>
        <div class="field">
          <select name="department_id" required>
            <option value="">BÃ¶lÃ¼m seÃ§in</option>
            {% for dept in departments %}
              <option value="{{ dept.id }}">{{ dept.name }}</option>
            {% endfor %}
          </select>
        </div>
        <button type="submit" name="add_doctor" class="btn btn-wide">Ekle</button>
      </form>

      <ul>
        {% for doctor in doctors %}
          <li class="list-item">
            <span>ğŸ‘¨â€âš•ï¸ Dr. {{ doctor.first_name }} {{ doctor.last_name }} <small>({{ doctor.department.name }})</small></span>
            <form method="post">
              {% csrf_token %}
              <input type="hidden" name="delete_doctor_id" value="{{ doctor.id }}">
              <button type="submit" class="delete-btn">Sil</button>
            </form>
          </li>
        {% empty %}
          <p class="empty-text">HenÃ¼z doktor eklenmemiÅŸ.</p>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endblock %}
